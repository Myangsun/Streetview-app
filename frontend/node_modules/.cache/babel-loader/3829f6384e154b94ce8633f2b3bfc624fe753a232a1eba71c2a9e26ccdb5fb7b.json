{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"type\", \"onComplete\", \"onError\"];\nimport { useState, useMemo, useEffect } from 'react';\nimport { useMapContext } from '@uiw/react-amap-map';\nexport var useGeolocation = function useGeolocation(props) {\n  if (props === void 0) {\n    props = {};\n  }\n  var {\n      type = 'position',\n      onComplete,\n      onError\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  var [geolocation, setGeolocation] = useState();\n  var {\n    map\n  } = useMapContext();\n  useEffect(() => {\n    if (AMap && !geolocation) {\n      var instance;\n      AMap.plugin(['AMap.Geolocation'], () => {\n        instance = new AMap.Geolocation(_extends({}, other));\n        setGeolocation(instance);\n      });\n      return () => {\n        if (instance) {\n          setGeolocation(undefined);\n        }\n      };\n    }\n  }, [AMap]);\n  function callback(status, result) {\n    if (status === 'complete' && onComplete) {\n      onComplete(result);\n    } else if (onError) {\n      onError(result);\n    }\n  }\n  useMemo(() => {\n    if (!/^(position|cityInfo)$/.test(type)) return;\n    var funName = type === 'position' ? 'getCurrentPosition' : 'getCityInfo';\n    if (geolocation && map) {\n      geolocation[funName](callback);\n      map.addControl(geolocation);\n    } else if (geolocation) {\n      geolocation[funName](callback);\n    }\n  }, [geolocation]);\n  return {\n    geolocation,\n    setGeolocation\n  };\n};","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","_excluded","useState","useMemo","useEffect","useMapContext","useGeolocation","props","type","onComplete","onError","other","geolocation","setGeolocation","map","AMap","instance","plugin","Geolocation","undefined","callback","status","result","test","funName","addControl"],"sources":["/Users/mingyang/Desktop/Application/AIGC/urban track/streetview app/frontend/node_modules/@uiw/react-amap-geolocation/esm/useGeolocation.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"type\", \"onComplete\", \"onError\"];\nimport { useState, useMemo, useEffect } from 'react';\nimport { useMapContext } from '@uiw/react-amap-map';\nexport var useGeolocation = function useGeolocation(props) {\n  if (props === void 0) {\n    props = {};\n  }\n  var {\n      type = 'position',\n      onComplete,\n      onError\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  var [geolocation, setGeolocation] = useState();\n  var {\n    map\n  } = useMapContext();\n  useEffect(() => {\n    if (AMap && !geolocation) {\n      var instance;\n      AMap.plugin(['AMap.Geolocation'], () => {\n        instance = new AMap.Geolocation(_extends({}, other));\n        setGeolocation(instance);\n      });\n      return () => {\n        if (instance) {\n          setGeolocation(undefined);\n        }\n      };\n    }\n  }, [AMap]);\n  function callback(status, result) {\n    if (status === 'complete' && onComplete) {\n      onComplete(result);\n    } else if (onError) {\n      onError(result);\n    }\n  }\n  useMemo(() => {\n    if (!/^(position|cityInfo)$/.test(type)) return;\n    var funName = type === 'position' ? 'getCurrentPosition' : 'getCityInfo';\n    if (geolocation && map) {\n      geolocation[funName](callback);\n      map.addControl(geolocation);\n    } else if (geolocation) {\n      geolocation[funName](callback);\n    }\n  }, [geolocation]);\n  return {\n    geolocation,\n    setGeolocation\n  };\n};"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,gCAAgC;AACrD,OAAOC,6BAA6B,MAAM,qDAAqD;AAC/F,IAAIC,SAAS,GAAG,CAAC,MAAM,EAAE,YAAY,EAAE,SAAS,CAAC;AACjD,SAASC,QAAQ,EAAEC,OAAO,EAAEC,SAAS,QAAQ,OAAO;AACpD,SAASC,aAAa,QAAQ,qBAAqB;AACnD,OAAO,IAAIC,cAAc,GAAG,SAASA,cAAcA,CAACC,KAAK,EAAE;EACzD,IAAIA,KAAK,KAAK,KAAK,CAAC,EAAE;IACpBA,KAAK,GAAG,CAAC,CAAC;EACZ;EACA,IAAI;MACAC,IAAI,GAAG,UAAU;MACjBC,UAAU;MACVC;IACF,CAAC,GAAGH,KAAK;IACTI,KAAK,GAAGX,6BAA6B,CAACO,KAAK,EAAEN,SAAS,CAAC;EACzD,IAAI,CAACW,WAAW,EAAEC,cAAc,CAAC,GAAGX,QAAQ,CAAC,CAAC;EAC9C,IAAI;IACFY;EACF,CAAC,GAAGT,aAAa,CAAC,CAAC;EACnBD,SAAS,CAAC,MAAM;IACd,IAAIW,IAAI,IAAI,CAACH,WAAW,EAAE;MACxB,IAAII,QAAQ;MACZD,IAAI,CAACE,MAAM,CAAC,CAAC,kBAAkB,CAAC,EAAE,MAAM;QACtCD,QAAQ,GAAG,IAAID,IAAI,CAACG,WAAW,CAACnB,QAAQ,CAAC,CAAC,CAAC,EAAEY,KAAK,CAAC,CAAC;QACpDE,cAAc,CAACG,QAAQ,CAAC;MAC1B,CAAC,CAAC;MACF,OAAO,MAAM;QACX,IAAIA,QAAQ,EAAE;UACZH,cAAc,CAACM,SAAS,CAAC;QAC3B;MACF,CAAC;IACH;EACF,CAAC,EAAE,CAACJ,IAAI,CAAC,CAAC;EACV,SAASK,QAAQA,CAACC,MAAM,EAAEC,MAAM,EAAE;IAChC,IAAID,MAAM,KAAK,UAAU,IAAIZ,UAAU,EAAE;MACvCA,UAAU,CAACa,MAAM,CAAC;IACpB,CAAC,MAAM,IAAIZ,OAAO,EAAE;MAClBA,OAAO,CAACY,MAAM,CAAC;IACjB;EACF;EACAnB,OAAO,CAAC,MAAM;IACZ,IAAI,CAAC,uBAAuB,CAACoB,IAAI,CAACf,IAAI,CAAC,EAAE;IACzC,IAAIgB,OAAO,GAAGhB,IAAI,KAAK,UAAU,GAAG,oBAAoB,GAAG,aAAa;IACxE,IAAII,WAAW,IAAIE,GAAG,EAAE;MACtBF,WAAW,CAACY,OAAO,CAAC,CAACJ,QAAQ,CAAC;MAC9BN,GAAG,CAACW,UAAU,CAACb,WAAW,CAAC;IAC7B,CAAC,MAAM,IAAIA,WAAW,EAAE;MACtBA,WAAW,CAACY,OAAO,CAAC,CAACJ,QAAQ,CAAC;IAChC;EACF,CAAC,EAAE,CAACR,WAAW,CAAC,CAAC;EACjB,OAAO;IACLA,WAAW;IACXC;EACF,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}