{"ast":null,"code":"import _objectDestructuringEmpty from \"@babel/runtime/helpers/objectDestructuringEmpty\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport { useState, useMemo, useEffect, useContext } from 'react';\nimport { useSetStatus, useEventProperties, useSettingProperties } from '@uiw/react-amap-utils';\nimport { Context } from './context';\n\n/**\n * 此类型是 `<Map>` 组件传递给子组件(如 `<Marker>`)的两个 props\n */\n\nexport var useMap = function useMap(props) {\n  if (props === void 0) {\n    props = {};\n  }\n  var other = _extends({}, (_objectDestructuringEmpty(props), props));\n  var [map, setMap] = useState();\n  var [zoom, setZoom] = useState(props.zoom || 15);\n  var [container, setContainer] = useState(props.container);\n  var {\n    dispatch\n  } = useContext(Context);\n  useEffect(() => {\n    if (container && !map && AMap) {\n      container.className = container.className + ' react-amap-wapper';\n      var instance = new AMap.Map(container, _extends({\n        zoom\n      }, other));\n      setMap(instance);\n    }\n    return () => {\n      if (map) {\n        map.clearInfoWindow();\n        map.clearLimitBounds();\n        map.clearMap();\n        map.destroy();\n        setMap(undefined);\n      }\n    };\n  }, [container, map]);\n  useEffect(() => {\n    if (map && container) {\n      dispatch({\n        map,\n        container,\n        AMap\n      });\n    }\n    return () => {\n      dispatch({\n        map: undefined,\n        container: undefined,\n        AMap: undefined\n      });\n    };\n  }, [map, container]);\n  useMemo(() => {\n    if (map && typeof props.zoom === 'number' && zoom !== props.zoom && props.zoom >= 2 && props.zoom <= 20) {\n      setZoom(props.zoom);\n      map.setZoom(props.zoom);\n    }\n  }, [zoom, props.zoom]);\n  useMemo(() => {\n    if (props.center && map) {\n      map.setCenter(props.center);\n    }\n  }, [map, props.center]);\n  useSetStatus(map, props, ['dragEnable', 'zoomEnable', 'jogEnable', 'pitchEnable', 'rotateEnable', 'animateEnable', 'keyboardEnable']);\n  // setStatus, setZoomAndCenter, setFitView\n  // 'Center',\n  useSettingProperties(map, props, ['Zoom', 'LabelzIndex', 'Layers', 'City', 'Bounds', 'LimitBounds', 'Lang', 'Rotation', 'DefaultCursor', 'MapStyle', 'Features', 'DefaultLayer', 'Pitch']);\n  useEventProperties(map, props, ['onMouseMove', 'onZoomChange', 'onMapMove', 'onMouseWheel', 'onZoomStart', 'onMouseOver', 'onMouseOut', 'onDblClick', 'onClick', 'onZoomEnd', 'onMoveEnd', 'onMouseUp', 'onMouseDown', 'onRightClick', 'onMoveStart', 'onDragStart', 'onDragging', 'onDragEnd', 'onHotspotOut', 'onHotspotOver', 'onTouchStart', 'onComplete', 'onHotspotClick', 'onTouchMove', 'onTouchEnd', 'onResize']);\n  return {\n    map,\n    setMap,\n    zoom,\n    setZoom,\n    container,\n    setContainer\n  };\n};","map":{"version":3,"names":["_objectDestructuringEmpty","_extends","useState","useMemo","useEffect","useContext","useSetStatus","useEventProperties","useSettingProperties","Context","useMap","props","other","map","setMap","zoom","setZoom","container","setContainer","dispatch","AMap","className","instance","Map","clearInfoWindow","clearLimitBounds","clearMap","destroy","undefined","center","setCenter"],"sources":["/Users/mingyang/Desktop/Application/AIGC/urban track/streetview app/node_modules/@uiw/react-amap-map/esm/useMap.js"],"sourcesContent":["import _objectDestructuringEmpty from \"@babel/runtime/helpers/objectDestructuringEmpty\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport { useState, useMemo, useEffect, useContext } from 'react';\nimport { useSetStatus, useEventProperties, useSettingProperties } from '@uiw/react-amap-utils';\nimport { Context } from './context';\n\n/**\n * 此类型是 `<Map>` 组件传递给子组件(如 `<Marker>`)的两个 props\n */\n\nexport var useMap = function useMap(props) {\n  if (props === void 0) {\n    props = {};\n  }\n  var other = _extends({}, (_objectDestructuringEmpty(props), props));\n  var [map, setMap] = useState();\n  var [zoom, setZoom] = useState(props.zoom || 15);\n  var [container, setContainer] = useState(props.container);\n  var {\n    dispatch\n  } = useContext(Context);\n  useEffect(() => {\n    if (container && !map && AMap) {\n      container.className = container.className + ' react-amap-wapper';\n      var instance = new AMap.Map(container, _extends({\n        zoom\n      }, other));\n      setMap(instance);\n    }\n    return () => {\n      if (map) {\n        map.clearInfoWindow();\n        map.clearLimitBounds();\n        map.clearMap();\n        map.destroy();\n        setMap(undefined);\n      }\n    };\n  }, [container, map]);\n  useEffect(() => {\n    if (map && container) {\n      dispatch({\n        map,\n        container,\n        AMap\n      });\n    }\n    return () => {\n      dispatch({\n        map: undefined,\n        container: undefined,\n        AMap: undefined\n      });\n    };\n  }, [map, container]);\n  useMemo(() => {\n    if (map && typeof props.zoom === 'number' && zoom !== props.zoom && props.zoom >= 2 && props.zoom <= 20) {\n      setZoom(props.zoom);\n      map.setZoom(props.zoom);\n    }\n  }, [zoom, props.zoom]);\n  useMemo(() => {\n    if (props.center && map) {\n      map.setCenter(props.center);\n    }\n  }, [map, props.center]);\n  useSetStatus(map, props, ['dragEnable', 'zoomEnable', 'jogEnable', 'pitchEnable', 'rotateEnable', 'animateEnable', 'keyboardEnable']);\n  // setStatus, setZoomAndCenter, setFitView\n  // 'Center',\n  useSettingProperties(map, props, ['Zoom', 'LabelzIndex', 'Layers', 'City', 'Bounds', 'LimitBounds', 'Lang', 'Rotation', 'DefaultCursor', 'MapStyle', 'Features', 'DefaultLayer', 'Pitch']);\n  useEventProperties(map, props, ['onMouseMove', 'onZoomChange', 'onMapMove', 'onMouseWheel', 'onZoomStart', 'onMouseOver', 'onMouseOut', 'onDblClick', 'onClick', 'onZoomEnd', 'onMoveEnd', 'onMouseUp', 'onMouseDown', 'onRightClick', 'onMoveStart', 'onDragStart', 'onDragging', 'onDragEnd', 'onHotspotOut', 'onHotspotOver', 'onTouchStart', 'onComplete', 'onHotspotClick', 'onTouchMove', 'onTouchEnd', 'onResize']);\n  return {\n    map,\n    setMap,\n    zoom,\n    setZoom,\n    container,\n    setContainer\n  };\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}