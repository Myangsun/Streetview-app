/*! For license information please see amap.min.js.LICENSE.txt */
!function(e,o){"object"===typeof exports&&"object"===typeof module?module.exports=o(require("react"),require("react-dom")):"function"===typeof define&&define.amd?define(["react","react-dom"],o):"object"===typeof exports?exports["@uiw/react-amap"]=o(require("react"),require("react-dom")):e["@uiw/react-amap"]=o(e.React,e.ReactDOM)}(self,((e,o)=>(()=>{"use strict";var n={828:function(e){e.exports=function(){function e(e){var a=[];return e.AMapUI&&a.push(o(e.AMapUI)),e.Loca&&a.push(n(e.Loca)),Promise.all(a)}function o(e){return new Promise((function(o,n){var t=[];if(e.plugins)for(var s=0;s<e.plugins.length;s+=1)-1==r.AMapUI.plugins.indexOf(e.plugins[s])&&t.push(e.plugins[s]);if(i.AMapUI===a.failed)n("\u524d\u6b21\u8bf7\u6c42 AMapUI \u5931\u8d25");else if(i.AMapUI===a.notload){i.AMapUI=a.loading,r.AMapUI.version=e.version||r.AMapUI.version,s=r.AMapUI.version;var u=document.body||document.head,c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/ui/"+s+"/main.js",c.onerror=function(e){i.AMapUI=a.failed,n("\u8bf7\u6c42 AMapUI \u5931\u8d25")},c.onload=function(){if(i.AMapUI=a.loaded,t.length)window.AMapUI.loadUI(t,(function(){for(var e=0,n=t.length;e<n;e++){var a=t[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}for(o();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()}));else for(o();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()},u.appendChild(c)}else i.AMapUI===a.loaded?e.version&&e.version!==r.AMapUI.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):t.length?window.AMapUI.loadUI(t,(function(){for(var e=0,n=t.length;e<n;e++){var a=t[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}o()})):o():e.version&&e.version!==r.AMapUI.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):l.AMapUI.push((function(e){e?n(e):t.length?window.AMapUI.loadUI(t,(function(){for(var e=0,n=t.length;e<n;e++){var a=t[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}o()})):o()}))}))}function n(e){return new Promise((function(o,n){if(i.Loca===a.failed)n("\u524d\u6b21\u8bf7\u6c42 Loca \u5931\u8d25");else if(i.Loca===a.notload){i.Loca=a.loading,r.Loca.version=e.version||r.Loca.version;var t=r.Loca.version,s=r.AMap.version.startsWith("2"),u=t.startsWith("2");if(s&&!u||!s&&u)n("JSAPI \u4e0e Loca \u7248\u672c\u4e0d\u5bf9\u5e94\uff01\uff01");else{s=r.key,u=document.body||document.head;var c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/loca?v="+t+"&key="+s,c.onerror=function(e){i.Loca=a.failed,n("\u8bf7\u6c42 AMapUI \u5931\u8d25")},c.onload=function(){for(i.Loca=a.loaded,o();l.Loca.length;)l.Loca.splice(0,1)[0]()},u.appendChild(c)}}else i.Loca===a.loaded?e.version&&e.version!==r.Loca.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):o():e.version&&e.version!==r.Loca.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):l.Loca.push((function(e){e?n(e):n()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var a,t;(t=a||(a={})).notload="notload",t.loading="loading",t.loaded="loaded",t.failed="failed";var r={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},l={AMap:[],AMapUI:[],Loca:[]},s=[],u=function(e){"function"==typeof e&&(i.AMap===a.loaded?e(window.AMap):s.push(e))};return{load:function(o){return new Promise((function(n,t){if(i.AMap==a.failed)t("");else if(i.AMap==a.notload){var l=o.key,c=o.version,p=o.plugins;l?(window.AMap&&"lbs.amap.com"!==location.host&&t("\u7981\u6b62\u591a\u79cdAPI\u52a0\u8f7d\u65b9\u5f0f\u6df7\u7528"),r.key=l,r.AMap.version=c||r.AMap.version,r.AMap.plugins=p||r.AMap.plugins,i.AMap=a.loading,c=document.body||document.head,window.___onAPILoaded=function(r){if(delete window.___onAPILoaded,r)i.AMap=a.failed,t(r);else for(i.AMap=a.loaded,e(o).then((function(){n(window.AMap)})).catch(t);s.length;)s.splice(0,1)[0]()},(p=document.createElement("script")).type="text/javascript",p.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+r.AMap.version+"&key="+l+"&plugin="+r.AMap.plugins.join(","),p.onerror=function(e){i.AMap=a.failed,t(e)},c.appendChild(p)):t("\u8bf7\u586b\u5199key")}else if(i.AMap==a.loaded)if(o.key&&o.key!==r.key)t("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(o.version&&o.version!==r.AMap.version)t("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{if(l=[],o.plugins)for(c=0;c<o.plugins.length;c+=1)-1==r.AMap.plugins.indexOf(o.plugins[c])&&l.push(o.plugins[c]);l.length?window.AMap.plugin(l,(function(){e(o).then((function(){n(window.AMap)})).catch(t)})):e(o).then((function(){n(window.AMap)})).catch(t)}else if(o.key&&o.key!==r.key)t("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(o.version&&o.version!==r.AMap.version)t("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{var d=[];if(o.plugins)for(c=0;c<o.plugins.length;c+=1)-1==r.AMap.plugins.indexOf(o.plugins[c])&&d.push(o.plugins[c]);u((function(){d.length?window.AMap.plugin(d,(function(){e(o).then((function(){n(window.AMap)})).catch(t)})):e(o).then((function(){n(window.AMap)})).catch(t)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,r={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},l={AMap:[],AMapUI:[],Loca:[]}}}}()},31:(e,o,n)=>{var a=n(787),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,o,n){var a,r={},u=null,c=null;for(a in void 0!==n&&(u=""+n),void 0!==o.key&&(u=""+o.key),void 0!==o.ref&&(c=o.ref),o)i.call(o,a)&&!s.hasOwnProperty(a)&&(r[a]=o[a]);if(e&&e.defaultProps)for(a in o=e.defaultProps)void 0===r[a]&&(r[a]=o[a]);return{$$typeof:t,type:e,key:u,ref:c,props:r,_owner:l.current}}o.jsx=u,o.jsxs=u},310:(e,o,n)=>{e.exports=n(31)},787:o=>{o.exports=e},156:e=>{e.exports=o}},a={};function t(e){var o=a[e];if(void 0!==o)return o.exports;var r=a[e]={exports:{}};return n[e].call(r.exports,r,r.exports,t),r.exports}t.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},t.d=(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{function e(e,o){if(null==e)return{};var n,a,t={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],o.indexOf(n)>=0||(t[n]=e[n]);return t}t.r(r),t.d(r,{APILoader:()=>s,AutoComplete:()=>h,BezierCurve:()=>L,Circle:()=>O,CircleMarker:()=>D,Context:()=>g,ContextMenu:()=>j,ControlBarControl:()=>N,Ellipse:()=>F,Geolocation:()=>q,HawkEyeControl:()=>$,InfoWindow:()=>X,LabelMarker:()=>ce,Map:()=>b,MapTypeControl:()=>ne,Marker:()=>se,MassMarks:()=>ve,MouseTool:()=>ke,MouseToolDrawType:()=>Ce,PolyEditor:()=>he,Polygon:()=>me,PolygonEditor:()=>Ae,Polyline:()=>ge,PolylineEditor:()=>we,Provider:()=>I,Rectangle:()=>Te,ScaleControl:()=>Oe,Text:()=>De,TileLayer:()=>re,TileLayerType:()=>te,ToolBarControl:()=>ze,Weather:()=>je,initialState:()=>E,reducer:()=>y,requireCss:()=>Le,requireScript:()=>xe,useAutoComplete:()=>A,useBezierCurve:()=>S,useCircle:()=>R,useCircleMarker:()=>U,useContextMenu:()=>z,useControlBarControl:()=>B,useEllipse:()=>Z,useEventProperties:()=>M,useGeolocation:()=>Y,useHawkEyeControl:()=>J,useInfoWindow:()=>Q,useMap:()=>C,useMapContext:()=>w,useMapTypeControl:()=>oe,useMarker:()=>le,useMassMarks:()=>de,usePolygon:()=>Me,usePolyline:()=>ye,usePortal:()=>p,usePrevious:()=>f,useRectangle:()=>be,useScaleControl:()=>Re,useSetStatus:()=>d,useSettingProperties:()=>m,useText:()=>Ue,useTileLayer:()=>ae,useToolBarControl:()=>He,useVisiable:()=>v,useWeather:()=>_e});var o=t(787),n=t.n(o),a=t(828),i=t(310),l=["children"],s=n=>{var{children:t}=n,r=e(n,l),[s,u]=(0,o.useState)(!1),[c,p]=(0,o.useState)();return(0,o.useEffect)((()=>{var e=r.akey||r.akay||"",o=r.plugins||(r.plugin?r.plugin.split(","):[]);(0,a.load)({key:e,plugins:o,version:r.version||"2.0",AMapUI:r.AMapUI,Loca:r.Loca}).then((()=>{p(void 0),u(!0)})).catch((e=>{p(e)}))}),[r.akey,r.akay]),c?(0,i.jsx)("div",{style:{color:"red"},children:c.message}):s?(0,i.jsx)(o.Fragment,{children:t}):null};function u(){return u=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(this,arguments)}var c=t(156),p=()=>{var[e]=n().useState((()=>document.createElement("div"))),[a,t]=(0,o.useState)({render:()=>null,remove:()=>null}),r=n().useCallback((e=>({render:o=>{var{children:n}=o;return n?(0,c.createPortal)(n,e):null},remove:e=>{e&&(0,c.unmountComponentAtNode)(e)}})),[]);return(0,o.useEffect)((()=>{e&&a.remove();var o=r(e);return t(o),()=>{o.remove(e)}}),[e]),{Portal:a.render,container:e}};function d(e,n,a){void 0===n&&(n={}),void 0===a&&(a=[]),a.forEach((a=>{var t=a,[r,i]=(0,o.useState)(n[t]);(0,o.useEffect)((()=>{if(e&&void 0!==n[t]&&n[t]!==r){var o=e.getStatus();e.setStatus(u({},o,{[t]:n[t]})),i(n[t])}}),[e,n[t]])}))}function v(e,n){var[a,t]=(0,o.useState)(n);(0,o.useEffect)((()=>{e&&void 0!==n&&(n?e.show&&e.show():e.hide&&e.hide(),n!==a&&t(n))}),[e,n])}function f(e){var n=(0,o.useRef)();return(0,o.useEffect)((()=>{n.current=e})),n.current}function M(e,n,a,t){void 0===n&&(n={}),void 0===a&&(a=[]),a.forEach((a=>{var t=a,r=n[t];(0,o.useEffect)((()=>{if(e){var o=a.toLocaleLowerCase().replace(/^on/,"");return r&&o&&e.on(o,r),()=>{o&&r&&e.off(o,r)}}}),[e,n[t]])}))}function m(e,n,a){void 0===e&&(e={}),void 0===n&&(n={}),void 0===a&&(a=[]),a.forEach((a=>{var t="set"+a,r=""+a.charAt(0).toLowerCase()+a.slice(1),[i,l]=(0,o.useState)(n[r]);(0,o.useEffect)((()=>{e&&void 0!==n[r]&&n[r]!==i&&e[t]&&"function"===typeof e[t]&&(e[t](n[r]),l(n[r]))}),[e,n[r]])}))}var A=function(e){void 0===e&&(e={});var[n,a]=(0,o.useState)();return(0,o.useEffect)((()=>{var o;if(AMap&&!n)return AMap.v?AMap.plugin(["AMap.Autocomplete"],(()=>{o=new AMap.Autocomplete(e),a(o)})):AMap.plugin(["AMap.AutoComplete"],(()=>{o=new AMap.AutoComplete(e),a(o)})),()=>{o&&a(void 0)}}),[]),m(n,e,["Type","City","CityLimit"]),M(n,e,["onChoose","onSelect"]),{autoComplete:n,setAutoComplete:a}},h=n().forwardRef(((e,n)=>{var{autoComplete:a}=A(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{autoComplete:a}))),null}));var E={map:void 0,AMap:void 0,container:void 0},y=(e,o)=>u({},e,o),g=n().createContext({state:E,dispatch:()=>null});function w(){var{state:e,dispatch:n}=(0,o.useContext)(g);return u({},e,{state:e,dispatch:n})}var C=function(e){void 0===e&&(e={});var n=u({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),[a,t]=(0,o.useState)(),[r,i]=(0,o.useState)(e.zoom||15),[l,s]=(0,o.useState)(e.container),{dispatch:c}=(0,o.useContext)(g);return(0,o.useEffect)((()=>{if(l&&!a&&AMap){l.className=l.className+" react-amap-wapper";var e=new AMap.Map(l,u({zoom:r},n));t(e)}return()=>{a&&(a.clearInfoWindow(),a.clearLimitBounds(),a.clearMap(),a.destroy(),t(void 0))}}),[l,a]),(0,o.useEffect)((()=>(a&&l&&c({map:a,container:l,AMap:AMap}),()=>{c({map:void 0,container:void 0,AMap:void 0})})),[a,l]),(0,o.useMemo)((()=>{a&&"number"===typeof e.zoom&&r!==e.zoom&&e.zoom>=2&&e.zoom<=20&&(i(e.zoom),a.setZoom(e.zoom))}),[r,e.zoom]),(0,o.useMemo)((()=>{e.center&&a&&a.setCenter(e.center)}),[a,e.center]),d(a,e,["dragEnable","zoomEnable","jogEnable","pitchEnable","rotateEnable","animateEnable","keyboardEnable"]),m(a,e,["Zoom","LabelzIndex","Layers","City","Bounds","LimitBounds","Lang","Rotation","DefaultCursor","MapStyle","Features","DefaultLayer","Pitch"]),M(a,e,["onMouseMove","onZoomChange","onMapMove","onMouseWheel","onZoomStart","onMouseOver","onMouseOut","onDblClick","onClick","onZoomEnd","onMoveEnd","onMouseUp","onMouseDown","onRightClick","onMoveStart","onDragStart","onDragging","onDragEnd","onHotspotOut","onHotspotOver","onTouchStart","onComplete","onHotspotClick","onTouchMove","onTouchEnd","onResize"]),{map:a,setMap:t,zoom:r,setZoom:i,container:l,setContainer:s}},k=["className","children"],I=e=>{var[n,a]=(0,o.useReducer)(y,E);return(0,i.jsx)(g.Provider,{value:u({},n,{state:n,dispatch:a}),children:e.children})},b=(0,o.forwardRef)(((n,a)=>{var{className:t,children:r}=n,l=e(n,k),s=window.AMap,[c,p]=(0,o.useReducer)(y,E),d=(0,o.useRef)(null),{setContainer:v,container:f,map:M}=C(u({container:l.container||d.current},l));(0,o.useEffect)((()=>v(d.current)),[d.current]),(0,o.useImperativeHandle)(a,(()=>u({},l,{map:M,AMap:s,container:l.container||d.current})),[M]);var m=o.Children.toArray(r);return(0,o.useEffect)((()=>{M&&p({map:M,container:d.current,AMap:s})}),[M]),(0,i.jsxs)(g.Provider,{value:u({},c,{state:c,dispatch:p}),children:[!l.container&&(0,i.jsx)("div",{ref:d,className:t,style:u({fontSize:1,width:"100%",height:"100%"},l.style)}),s&&M&&"function"===typeof r&&r({AMap:s,map:M,container:f}),s&&M&&m.map(((e,n)=>(0,o.isValidElement)(e)?"string"===typeof e?(0,o.cloneElement)((0,i.jsx)(o.Fragment,{children:e}),{key:n}):e.type&&"string"===typeof e.type?(0,o.cloneElement)(e,{key:n}):(0,o.cloneElement)(e,u({},e.props,{AMap:s,map:M,container:f,key:n})):null))]})})),T=["visiable"],S=function(n){void 0===n&&(n={});var{visiable:a}=n,t=e(n,T),{map:r}=w(),[i,l]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!i){var e=new AMap.BezierCurve(u({},t));return r.add(e),l(e),()=>{e&&(AMap.v?r&&r.remove(e):r&&r.removeLayer(e),l(void 0))}}}),[r]),v(i,a),m(i,n,["Options","Path","ExtData","ExtData"]),M(i,n,["onHide","onShow","onDblClick","onMouseOver","onMouseUp","onMouseDown","onclick","onTouchEnd","onTouchMove","onTouchStart","onRightClick","onMouseOut"]),{bezierCurve:i,setBezierCurve:l}},L=n().forwardRef(((e,n)=>{var{bezierCurve:a}=S(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{bezierCurve:a}))),null})),x=["visiable"],R=function(n){void 0===n&&(n={});var{visiable:a}=n,t=e(n,x),{map:r}=w(),[i,l]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!i){var e=new AMap.Circle(u({},t));r.add(e),l(e)}return()=>{l((e=>{e&&r&&r.remove(e)}))}}),[r]),v(i,a),m(i,n,["Center","Raius","Options","ExtData"]),M(i,n,["onHide","onShow","onRightClick","onClick","onTouchEnd","onDblClick","onTouchMove","onTouchStart","onMouseOut","onMouseOver","onMouseUp","onMouseDown"]),{circle:i,setCircle:l}},O=n().forwardRef(((e,n)=>{var{circle:a}=R(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{circle:a}))),null})),P=["visiable"],U=function(n){void 0===n&&(n={});var{visiable:a}=n,t=e(n,P),{map:r}=w(),[i,l]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!i){var e=new AMap.CircleMarker(u({},t));return r.add(e),l(e),()=>{e&&(AMap.v?r&&r.remove(e):r&&r.removeLayer(e),l(void 0))}}}),[r]),v(i,a),m(i,n,["Center","Raius","zIndex","Bubble","Cursor","StrokeColor","StrokeOpacity","StrokeWeight","FillColor","FillOpacity","Draggable","ExtData"]),M(i,n,["onHide","onShow","onMouseover","onTouchend","onClick","onTouchmove","onRightclick","onMouseup","onMouseout","onTouchstart","onMousedown","onDblclick"]),{circleMarker:i,setCircleMarker:l}},D=n().forwardRef(((e,n)=>{var{circleMarker:a}=U(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{circleMarker:a}))),null})),H=["position"],z=function(n){void 0===n&&(n={});var{position:a}=n,t=e(n,H),{map:r}=w(),[i,l]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!i){var e=new AMap.ContextMenu(u({},t));l(e);var o=o=>e.open(r,a||o.lnglat);return r.on("rightclick",o),()=>{e&&(e.close(),r.off("rightclick",o),l(void 0))}}}),[r]),M(i,n,["onOpen","onClose"]),{contextMenu:i,setContextMenu:l}},_=function(){};var j=n().forwardRef(((e,a)=>{var{contextMenu:t}=z(e);(0,o.useImperativeHandle)(a,(()=>u({},e,{contextMenu:t})));var r=n().Children.toArray(e.children);return(0,i.jsx)(o.Fragment,{children:AMap&&t&&r.map(((o,a)=>n().isValidElement(o)?n().cloneElement(o,u({},o.props,{AMap:AMap,map:e.map,contextMenu:t,key:a})):null))})}));function B(e){void 0===e&&(e={});var{position:n,visiable:a,offset:t}=e,[r,i]=(0,o.useState)(),{map:l}=w();return(0,o.useEffect)((()=>{var e;if(l&&!r)return l.plugin(["AMap.ControlBar","AMap.HawkEye"],(()=>{e=new AMap.ControlBar({offset:t,position:n}),l.addControl(e),i(e)})),()=>{e&&l.removeControl(e)}}),[l]),v(r,a),{controlBarControl:r,setControlBarControl:i}}j.Item=function(e){void 0===e&&(e={});var{text:n="",onClick:a=_}=e;return(0,o.useEffect)((()=>(e.contextMenu&&e.contextMenu.addItem(n,a,1),()=>{e.contextMenu&&e.contextMenu.removeItem(n,a)})),[e.contextMenu,e.text,e.onClick]),null};var N=n().forwardRef(((e,n)=>{var{controlBarControl:a}=B(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{controlBarControl:a})),[a]),null})),W=["visiable"],Z=function(n){void 0===n&&(n={});var{visiable:a}=n,t=e(n,W),{map:r}=w(),[i,l]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!i){var e=new AMap.Ellipse(u({},t));return r.add(e),l(e),()=>{e&&(AMap.v?r&&r.remove(e):r&&r.removeLayer(e),l(void 0))}}}),[r]),v(i,a),m(i,n,["Center","Radius","Options","ExtData"]),M(i,n,["onHide","onShow","onClick","onDblClick","onRightClick","onMouseOut","onMouseOver","onMouseUp","onMouseDown","onTouchEnd","onTouchMove","onTouchStart"]),{ellipse:i,setEllipse:l}},F=n().forwardRef(((e,n)=>{var{ellipse:a}=Z(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{ellipse:a}))),null})),G=["type","onComplete","onError"],Y=function(n){void 0===n&&(n={});var{type:a="position",onComplete:t,onError:r}=n,i=e(n,G),[l,s]=(0,o.useState)(),{map:c}=w();function p(e,o){"complete"===e&&t?t(o):r&&r(o)}return(0,o.useEffect)((()=>{var e;if(AMap&&!l)return AMap.plugin(["AMap.Geolocation"],(()=>{e=new AMap.Geolocation(u({},i)),s(e)})),()=>{e&&s(void 0)}}),[AMap]),(0,o.useMemo)((()=>{if(/^(position|cityInfo)$/.test(a)){var e="position"===a?"getCurrentPosition":"getCityInfo";l&&c?(l[e](p),c.addControl(l)):l&&l[e](p)}}),[l]),{geolocation:l,setGeolocation:s}},q=n().forwardRef(((e,n)=>{var{geolocation:a}=Y(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{geolocation:a}))),null})),V=["offset","visiable"];function J(n){void 0===n&&(n={});var[a,t]=(0,o.useState)(),{offset:r,visiable:i}=n,l=e(n,V),{map:s}=w();return(0,o.useEffect)((()=>{var e;if(s&&!a)return s.plugin(["AMap.HawkEye"],(()=>{e=new AMap.HawkEye(u({offset:r},l)),s.addControl(e),t(e)})),()=>{e&&s&&(s&&s.removeControl(e),t(void 0))}}),[s]),v(a,i),{hawkEyeControl:a,setHawkEyeControl:t}}var $=n().forwardRef(((e,n)=>{var{hawkEyeControl:a}=J(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{hawkEyeControl:a})),[a]),null})),K=["visiable","position"],Q=function(n){void 0===n&&(n={});var{visiable:a,position:t}=n,r=e(n,K),{map:i}=w(),[l,s]=(0,o.useState)(a),[c,d]=(0,o.useState)(),{container:v,Portal:f}=p();return(0,o.useEffect)((()=>{if(AMap&&i&&!c){var e=i.getCenter();n.children&&(r.content=v);var o=new AMap.InfoWindow(u({},r,{position:t||e}));return d(o),l&&o.open(i,t||e),()=>{o&&(i&&i.remove(o),d(void 0))}}}),[i]),(0,o.useEffect)((()=>{c&&c.setContent(n.children?v:r.content||"")}),[n.children,v,r.content,c]),(0,o.useMemo)((()=>{if(l!==a&&c&&i)if(s(a),a){var e=i.getCenter();c.open(i,t||e)}else c.close()}),[a,c]),(0,o.useEffect)((()=>{if(i&&c&&a){var e=i.getCenter();c.open(i,t||e)}}),[t]),m(c,n,["Content","Anchor","Size"]),M(c,n,["onOpen","onClose","onChange"]),{isOpen:l,setIsOpen:s,infoWindow:c,setInfoWindow:d,InfoWindowPortal:f}},X=n().forwardRef(((e,n)=>{var{infoWindow:a,InfoWindowPortal:t}=Q(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{infoWindow:a}))),(0,i.jsx)(t,{children:e.children})})),ee=["visiable","defaultType"];function oe(n){void 0===n&&(n={});var[a,t]=(0,o.useState)(),{visiable:r,defaultType:i=0}=n,l=e(n,ee),{map:s}=w();return(0,o.useEffect)((()=>{var e;if(s&&!a)return s.plugin(["AMap.MapType"],(()=>{e=new AMap.MapType(u({defaultType:i},l)),s.addControl(e),t(e)})),()=>{e&&s.removeControl(e)}}),[s]),v(a,r),{mapTypeControl:a,setMapTypeControl:t}}var ne=n().forwardRef(((e,n)=>{var{mapTypeControl:a}=oe(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{mapTypeControl:a})),[a]),null}));function ae(e){void 0===e&&(e={});var[n,a]=(0,o.useState)(),{visiable:t,type:r,options:i}=e,{map:l}=w();return(0,o.useEffect)((()=>{if(l){var o=null;if(r)switch(r){case te.ROADNET:o=new AMap.TileLayer.RoadNet({});break;case te.SATELLITE:o=new AMap.TileLayer.Satellite({});break;case te.TRAFFIC:o=new AMap.TileLayer.Traffic({})}return i&&(o=new AMap.TileLayer(i)),o&&(l.add(o),e.onAdded&&e.onAdded(),a(o)),()=>{o&&(AMap.v?l&&l.remove(o):l&&l.removeLayer(o),a(null),e.onRemoved&&e.onRemoved())}}}),[l,r,i]),v(n,t),{tileLayer:n,setTileLayer:a}}var te=function(e){return e.SATELLITE="satellite",e.TRAFFIC="traffic",e.ROADNET="roadnet",e}({}),re=n().forwardRef(((e,n)=>{var{tileLayer:a}=ae(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{tileLayer:a})),[a]),null})),ie=["visiable","children"],le=function(n){void 0===n&&(n={});var{visiable:a}=n,t=e(n,ie),{map:r}=w(),[i,l]=(0,o.useState)(),{container:s,Portal:c}=p();return(0,o.useEffect)((()=>{if(!i&&r){n.children&&(t.content=s);var e=new AMap.Marker(u({},t));r.add(e),l(e)}return()=>{i&&(i.setMap(null),l(void 0))}}),[r,i]),v(i,a),m(i,n,["Path","Anchor","Offset","Animation","Clickable","Position","Angle","Label","zIndex","Icon","Draggable","Cursor","Content","Map","Title","Top","Shadow","Shape","ExtData"]),M(i,n,["onClick","onDblClick","onRightClick","onMouseMove","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragStart","onDragging","onDragEnd","onMoving","onMoveEnd","onMoveAlong","onTouchStart","onTouchMove","onTouchEnd"]),{marker:i,setMarker:l,MarkerPortal:c}},se=(0,o.forwardRef)(((e,n)=>{var{marker:a,MarkerPortal:t}=le(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{marker:a})),[a]),(0,i.jsx)(t,{children:e.children})})),ue=["visiable","children","text","icon"],ce=(0,o.forwardRef)(((n,a)=>{var{labelMarker:t}=function(n){void 0===n&&(n={});var{visiable:a,text:t,icon:r}=n,i=e(n,ue),{map:l,AMap:s}=w(),[c,p]=(0,o.useState)();return(0,o.useEffect)((()=>{if(!c&&l){var e,o=t;t||(o={content:"",direction:"right",offset:[-20,-5],style:{fontSize:12,fillColor:"#22886f",strokeColor:"#fff",strokeWidth:2}});var n=r;n||(n={image:"http://webapi.amap.com/theme/v1.3/markers/b/mark_bs.png",size:[19,32],anchor:"center"});var a,d=new s.LabelMarker(u({style:n,icon:n,text:o},i));p(d),0===(null==s||null==(e=s.v)?void 0:e.indexOf("1.4"))&&(l.labelMarkersLayer?a=l.labelMarkersLayer:(l.labelMarkersLayer=a=new s.LabelsLayer({zooms:[3,20],zIndex:101,collision:!0,animation:!0}),l.add(a)),a.add(d)),l.add(d)}return()=>{var e,o;c&&(0===(null==s||null==(e=s.v)?void 0:e.indexOf("1.4"))&&(null==l||null==(o=l.labelMarkersLayer)||o.remove(c)),p(void 0))}}),[c,l]),v(c,a),m(c,n,["Name","Position","Zooms","Opacity","zIndex","Rank","Text","Icon","ExtData","Top"]),M(c,n,["onMousedown","onMouseup","onTouchstart","onTouchmove","onTouchend","onClick","onMousemove","onMouseover","onMouseout"]),{labelMarker:c,setLabelMarker:p}}(n);return(0,o.useImperativeHandle)(a,(()=>u({},n,{labelMarker:t})),[t]),null})),pe=["visiable"],de=function(n){void 0===n&&(n={});var{visiable:a}=n,t=e(n,pe),{map:r}=w(),{opacity:i=.8,zIndex:l=1111,style:s,data:u}=t||{},[c,p]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!c){var e=s;e||(e=[{url:"https://webapi.amap.com/images/mass/mass0.png",anchor:new AMap.Pixel(6,6),size:new AMap.Size(11,11),zIndex:3},{url:"https://webapi.amap.com/images/mass/mass1.png",anchor:new AMap.Pixel(4,4),size:new AMap.Size(7,7),zIndex:2},{url:"https://webapi.amap.com/images/mass/mass2.png",anchor:new AMap.Pixel(3,3),size:new AMap.Size(5,5),zIndex:1}]);var o=new AMap.MassMarks(u||[],{opacity:i,zIndex:l,style:e});return p(o),o.setMap(r),()=>{o&&(o.clear(),p(void 0))}}}),[r]),v(c,a),m(c,n,["Map","Data","Style","Opacity","zIndex","Zooms"]),M(c,n,["onClick","onDblClick","onMouseMove","onMouseOut","onMouseUp","onMouseDown","onMouseOver","onTouchStart","onTouchEnd"]),{massMarks:c,setMassMarks:p}},ve=n().forwardRef(((e,n)=>{var{massMarks:a}=de(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{massMarks:a})),[a,e]),null})),fe=["visiable"],Me=function(n){void 0===n&&(n={});var{visiable:a}=n,t=e(n,fe),{map:r}=w(),[i,l]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!i){var e=new AMap.Polygon(u({},t));return r.add(e),l(e),()=>{e&&(AMap.v?r&&r.remove(e):r&&r.removeLayer(e),l(void 0))}}}),[r]),v(i,a),m(i,n,["Path","Options","Map","ExtData","Draggable"]),M(i,n,["onClick","onDblClick","onRightClick","onHide","onShow","onMouseDown","onMouseUp","onMouseOver","onMouseOut","onChange","onDragStart","onDragging","onDragEnd","onTouchStart","onTouchMove","onTouchEnd"]),{polygon:i,setPolygon:l}},me=(0,o.forwardRef)(((e,n)=>{var{children:a}=e,{polygon:t}=Me(e);if((0,o.useImperativeHandle)(n,(()=>u({},e,{polygon:t})),[t]),a&&(0,o.isValidElement)(a)&&t){var r={polygon:t,polyElement:t};return(0,o.cloneElement)(a,u({},e,r))}return null})),Ae=(0,o.forwardRef)(((e,n)=>{var{active:a,polygon:t}=e,{map:r}=w(),[i,l]=(0,o.useState)(!0),[s,c]=(0,o.useState)();return(0,o.useImperativeHandle)(n,(()=>u({},e,{polyEditor:s}))),(0,o.useEffect)((()=>{if(t&&r&&!s&&AMap&&AMap.PolygonEditor){var e=new AMap.PolygonEditor(r,t);t.on("hide",(()=>l(!1))),t.on("show",(()=>l(!0))),c(e)}}),[t]),(0,o.useEffect)((()=>{s&&(i&&!a?(s.close(),e.onEnd&&e.onEnd({target:e.polygon})):i&&a?(s.open(),e.onAdd&&e.onAdd({target:e.polygon})):!i&&a&&(s.close(),e.onEnd&&e.onEnd({target:e.polygon})))}),[a,i]),M(s,e,["onEnd","onAddnode","onRemovenode","onAdjust","onMove","onAdd"]),null})),he=(0,o.forwardRef)(((e,n)=>{var{active:a,polyElement:t}=e,{map:r}=w(),[i,l]=(0,o.useState)(!0),[s,c]=(0,o.useState)();return(0,o.useImperativeHandle)(n,(()=>u({},e,{polyEditor:s}))),(0,o.useEffect)((()=>{if(t&&r&&!s&&AMap&&AMap.PolyEditor){var e=new AMap.PolyEditor(r,t);t.on("hide",(()=>l(!1))),t.on("show",(()=>l(!0))),c(e)}}),[t]),(0,o.useEffect)((()=>{s&&(i&&!a?(s.close(),e.onEnd&&e.onEnd({type:"end",target:e.polyElement})):i&&a?s.open():!i&&a&&(s.close(),e.onEnd&&e.onEnd({type:"end",target:e.polyElement})))}),[a,i]),M(s,e,["onEnd","onAddnode","onAdjust","onRemovenode"]),null})),Ee=["visiable"];function ye(n){void 0===n&&(n={});var[a,t]=(0,o.useState)(),{visiable:r}=n,i=e(n,Ee),{map:l}=w();return(0,o.useEffect)((()=>{if(l&&!a){var e=new AMap.Polyline(u({},i));return l.add(e),t(e),()=>{e&&(AMap.v?l&&l.remove(e):l&&l.removeLayer(e),t(void 0))}}}),[l]),v(a,r),m(a,n,["Path","Options","Map","ExtData","Draggable"]),M(a,n,["onHide","onShow","onMouseOut","onChange","onDragStart","onDragging","onDragEnd","onRightClick","onDblClick","onMouseDown","onClick","onMouseOver","onTouchEnd","onTouchMove","onTouchStart","onMouseUp"]),{polyline:a,setPolyline:t}}var ge=n().forwardRef(((e,n)=>{var{children:a}=e,{polyline:t}=ye(e);if((0,o.useImperativeHandle)(n,(()=>u({},e,{polyline:t})),[t]),a&&(0,o.isValidElement)(a)&&t){var r={polyElement:t,polyline:t};return(0,o.cloneElement)(a,u({},e,r))}return null})),we=(0,o.forwardRef)(((e,n)=>{var{active:a,polyline:t}=e,{map:r}=w(),[i,l]=(0,o.useState)(!0),[s,c]=(0,o.useState)();return(0,o.useImperativeHandle)(n,(()=>u({},e,{polyEditor:s}))),(0,o.useEffect)((()=>{if(t&&r&&!s&&AMap&&AMap.PolylineEditor){var e=new AMap.PolylineEditor(r,t);t.on("hide",(()=>l(!1))),t.on("show",(()=>l(!0))),c(e)}}),[t]),(0,o.useEffect)((()=>{s&&(i&&!a?(s.close(),e.onEnd&&e.onEnd({target:e.polyline})):i&&a?(s.open(),e.onAdd&&e.onAdd({target:e.polyline})):!i&&a&&(s.close(),e.onEnd&&e.onEnd({target:e.polyline})))}),[a,i,s]),M(s,e,["onEnd","onAddnode","onRemovenode","onAdjust","onAdd"]),null})),Ce=function(e){return e[e.MARKER=0]="MARKER",e[e.POLYLINE=1]="POLYLINE",e[e.POLYGON=2]="POLYGON",e[e.CIRCLE=3]="CIRCLE",e[e.RECTANGLE=4]="RECTANGLE",e[e.MEASUREAREA=5]="MEASUREAREA",e[e.RULE=6]="RULE",e[e.RECTZOOMIN=7]="RECTZOOMIN",e[e.RECTZOOMOUT=8]="RECTZOOMOUT",e}({}),ke=(0,o.forwardRef)(((e,n)=>{var{active:a,type:t,drawElementOptions:r,ifClear:i}=e,{map:l}=w(),[s,c]=(0,o.useState)();return(0,o.useImperativeHandle)(n,(()=>u({},e,{mouseTool:s}))),(0,o.useEffect)((()=>{if(l&&!s&&AMap&&AMap.MouseTool){var e=new AMap.MouseTool(l);c(e)}}),[l,Map,AMap.MouseTool]),(0,o.useEffect)((()=>{if(s)if(a)switch(t){case Ce.MARKER:s.marker(r||{});break;case Ce.POLYLINE:s.polyline(r||{});break;case Ce.POLYGON:s.polygon(r||{});break;case Ce.CIRCLE:s.circle(r||{});break;case Ce.RECTANGLE:s.rectangle(r||{});break;case Ce.MEASUREAREA:s.measureArea(r||{});break;case Ce.RULE:s.rule(r||{});break;case Ce.RECTZOOMIN:s.rectZoomIn(r||{});break;case Ce.RECTZOOMOUT:s.rectZoomOut(r||{})}else s.close(i)}),[a,i]),M(s,e,["onDraw"]),null})),Ie=["visiable"],be=function(n){void 0===n&&(n={});var{visiable:a}=n,t=e(n,Ie),{map:r}=w(),[i,l]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!i){var e=new AMap.Rectangle(u({},t));return r.add(e),l(e),()=>{e&&(AMap.v?r&&r.remove(e):r&&r.removeLayer(e),l(void 0))}}}),[r]),v(i,a),m(i,n,["Bounds","Options","Map","ExtData"]),M(i,n,["onHide","onShow","onClick","onDblClick","onRightClick","onMouseOut","onMouseOver","onMouseUp","onMouseDown","onTouchEnd","onTouchMove","onTouchStart"]),{rectangle:i,setRectangle:l}},Te=n().forwardRef(((e,n)=>{var{rectangle:a}=be(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{rectangle:a}))),null})),Se={};function Le(e,o){void 0===o&&(o="_react_amap_css");var n=document&&(document.head||document.getElementsByTagName("head")[0]),a=document.getElementById(o);return new Promise(((t,r)=>{if(!document||e in Se||a)t();else{var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.id=o,i.href=e,i.onerror=o=>{n.removeChild(i),r(new URIError("The css "+e+" is no accessible."))},i.onload=()=>{Se[e]=!0,t()},n.appendChild(i)}}))}function xe(e,o){void 0===o&&(o="_react_amap_plugin");var n=document&&(document.head||document.getElementsByTagName("head")[0]),a=document.getElementById(o);return new Promise(((t,r)=>{if(!document||e in Se||a)t();else{var i=document.createElement("script");i.type="text/javascript",i.id=o,i.async=!0,i.defer=!0,i.src=e,i.onerror=o=>{n.removeChild(i),r(new URIError("The Script "+e+" is no accessible."))},i.onload=()=>{Se[e]=!0,t()},n.appendChild(i)}}))}function Re(e){void 0===e&&(e={});var[n,a]=(0,o.useState)(),{position:t,visiable:r,offset:i}=e,{map:l}=w();return(0,o.useEffect)((()=>{var e;if(l&&!n)return l.plugin(["AMap.Scale"],(()=>{e=new AMap.Scale({offset:i,position:t}),l.addControl(e),a(e)})),()=>{e&&l.removeControl(e)}}),[l]),v(n,r),{scaleControl:n,setScaleControl:a}}var Oe=n().forwardRef(((e,n)=>{var{scaleControl:a}=Re(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{scaleControl:a})),[a]),null})),Pe=["visiable"],Ue=function(n){void 0===n&&(n={});var{visiable:a}=n,t=e(n,Pe),[r,i]=(0,o.useState)(),{map:l}=w(),{container:s,Portal:c}=p();return(0,o.useEffect)((()=>{if(AMap&&l&&!r){n.children&&(t.text=s.innerHTML);var e=new AMap.Text(u({},t));return l.add(e),i(e),()=>{e&&(e.remove(),i(void 0))}}}),[l]),(0,o.useEffect)((()=>{r&&r.setText(n.children?s.innerHTML:n.text||"")}),[n.children,n.text,s,r]),v(r,a),m(r,n,["Style","Title","Clickable","Draggable","Map","Position","Offset","Angle","zIndex","Top","Cursor","ExtData"]),M(r,n,["onMoving","onTouchMove","onTouchEnd","onMoveaLong","onTouchStart","onMoveEnd","onClick","onDblClick","onRightClick","onMouseMove","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragStart","onDragEnd","onDragging"]),{text:r,setText:i,TextPortal:c}},De=(0,o.forwardRef)(((e,n)=>{var{text:a,TextPortal:t}=Ue(u({},e));return(0,o.useImperativeHandle)(n,(()=>u({},e,{text:a}))),e.children?(0,i.jsx)(t,{children:e.children}):null}));function He(e){void 0===e&&(e={});var[n,a]=(0,o.useState)(),{position:t,visiable:r,offset:i}=e,{map:l}=w();return(0,o.useEffect)((()=>{var e;if(l&&!n)return l.plugin(["AMap.ToolBar"],(()=>{e=new AMap.ToolBar({offset:i,position:t}),l.addControl(e),a(e)})),()=>{e&&l.removeControl(e)}}),[l]),v(n,r),{toolBarControl:n,setToolBarControl:a}}var ze=n().forwardRef(((e,n)=>{var{toolBarControl:a}=He(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{toolBarControl:a})),[a]),null})),_e=function(e){void 0===e&&(e={});var{city:n="",type:a="live",onComplete:t,onError:r}=e,[i,l]=(0,o.useState)(),s="live"===a?"getLive":"getForecast";return(0,o.useEffect)((()=>{var e;if(AMap&&!i)return AMap.plugin(["AMap.Weather"],(()=>{e=new AMap.Weather,l(e)})),()=>{e&&l(void 0)}}),[]),(0,o.useMemo)((()=>{var e;i&&n&&a&&(e=i,a&&n&&/^(live|forecast)$/.test(a)&&e[s](n,((e,o)=>{e&&r?r(e):o&&t&&t(o)})))}),[i,n,a]),{weather:i,setWeather:l}},je=n().forwardRef(((e,n)=>{var{weather:a}=_e(e);return(0,o.useImperativeHandle)(n,(()=>u({},e,{weather:a}))),null}))})(),r})()));